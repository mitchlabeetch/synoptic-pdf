# synoptic-pdf/.env.example
# Environment Configuration for Synoptic PDF Engine v3.1.0
# Professional Print Pipeline: Paged.js + Ghostscript
# Copy this file to .env and configure for your environment

# ═══════════════════════════════════════════════════════════════════
# SERVER CONFIGURATION
# ═══════════════════════════════════════════════════════════════════

# Server port (default: 3000)
PORT=3000

# Node environment (development/production)
NODE_ENV=production

# Temporary directory for PDF processing
TEMP_DIR=/app/tmp

# ═══════════════════════════════════════════════════════════════════
# SECURITY
# ═══════════════════════════════════════════════════════════════════

# API Key for service authentication
# REQUIRED in production - prevents unauthorized access and SSRF attacks
# Generate a strong secret: openssl rand -hex 32
PDF_SERVICE_SECRET=your-secure-secret-here

# ═══════════════════════════════════════════════════════════════════
# PERFORMANCE & SCALING
# ═══════════════════════════════════════════════════════════════════

# Maximum concurrent PDF generation jobs (default: 3)
# Each job uses ~200-500MB RAM. Set based on available memory.
# Recommended: (Available RAM - 1GB) / 500MB
MAX_CONCURRENT_JOBS=3

# Default timeout in milliseconds for PDF generation (default: 120000 = 2 minutes)
DEFAULT_TIMEOUT_MS=120000

# Maximum allowed timeout in milliseconds (default: 600000 = 10 minutes)
# Used for very large documents (100+ pages)
MAX_TIMEOUT_MS=600000

# Number of pages to process before restarting browser (default: 100)
# Helps prevent memory leaks in long-running containers
BROWSER_RESTART_THRESHOLD=100

# ═══════════════════════════════════════════════════════════════════
# FEATURE FLAGS
# ═══════════════════════════════════════════════════════════════════

# Enable Paged.js for CSS Paged Media support (default: true)
# Provides: mirror margins, running headers, orphan/widow control
ENABLE_PAGEDJS=true

# Enable Ghostscript CMYK conversion (default: false in dev, true in prod)
# Requires Ghostscript to be installed in the container
ENABLE_CMYK_CONVERSION=true

# PDF/X compliance standard (default: PDF/X-1a)
# Options: PDF/X-1a, PDF/X-3, PDF/X-4
PDF_X_STANDARD=PDF/X-1a

# ═══════════════════════════════════════════════════════════════════
# PUPPETEER CONFIGURATION
# ═══════════════════════════════════════════════════════════════════

# Skip Chromium download during npm install (use container's version)
PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=false

# ═══════════════════════════════════════════════════════════════════
# DEVELOPMENT ONLY
# ═══════════════════════════════════════════════════════════════════

# Set to true to disable authentication in development
# NEVER enable in production
# PDF_SERVICE_SECRET=
